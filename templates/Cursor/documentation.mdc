---
alwaysApply: true
description: Documentation rules for nbdev projects
---
# Documentation Sources

### For LLMs Reading the Project
- **`_docs/*.md`**: Model-friendly markdown files (one per notebook/module)
  - Use these instead of parsing notebook JSON when referencing other notebooks or modules apart from the one you are currently working on.
    - Auto-generated by nbdev, always should be up-to-date
- **`nbs/*.ipynb`**: Source notebooks (if you need full context)
- **`_testbed/`**: Exploratory work, not part of main workflow (skip unless relevant)

### For Humans
- **`README.md`**: Entry point (auto-generated from `nbs/index.ipynb`)
- **Online docs**: Full API reference at project URL

### Reading Strategy for LLMs
- When referencing other notebooks/modules: Read `_docs/*.md` files
- When editing a notebook: Work directly with the `.ipynb` (already in context)
- Check `README.md` first for project overview
- Reference `@project.mdc` for project-specific patterns
- Reference `@general.mdc` for general project patterns

# Generation Guidelines

## VERY IMPORTANT: ensure sources are always up to date with the latest changes in the project. Warn the user if they are not.

### Regeneration Workflow
- Only regenerate docs (`nbdev_prepare` or `nbdev_export`) when current notebook work is complete and approved
- Do NOT regenerate after every edit - wasteful and error-prone
- User will explicitly request doc generation when ready

## Philosophy
- Focus on `nbs/` folder notebooks
- Assume experienced Python developers familiar with Jupyter-based libraries
- Write concisely. Prefer examples and tests to explanations.
- Use type hints to document parameters and return values
- Demonstrate behavior with `fastcore` tests instead of narration
- Keep docstrings to one line unless essential context needed

## Function and Class Documentation

1. Review existing tests - use them as primary documentation when adequate
2. Write short docstring supported by type hints
3. Add behavioral tests only when missing or unclear
4. Cell order:
   - Implementation (`#| export`)
   - Immediate example or minimal test
   - Additional test cells for validation

### Test Guidelines
- Don't test Python or stdlib behavior
- Tests should read naturally as documentation
- One concept per test cell
- Use real examples from project when possible

## Notebook Structure
See @notebook-structure.mdc for detailed patterns.

## Notes
- Embrace nbdev's literate programming â€” exploration is documentation
- Emphasize behavioral clarity, readability, maintainability
